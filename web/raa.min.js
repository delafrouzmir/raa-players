function makeSpectrum(t,a,e,s,r){function i(t){var a=c[t],e=p[t];return a>=e&&(e=a),(e-=.1)<0&&(e=0),e*=r,p[t]=e,e}function l(t){t=t||c;for(var a=0;a<s;a++)t[a]=Math.random();var e=(new Date).getMilliseconds()%10;t[0]=.2*t[0]+e/10*.8,s>1&&(t[1]=.3*t[1]+e/10*.7),s>2&&(t[2]=.5*t[2]+e/10*.5)}s=s||12,r=r||1,s<1&&(s=1),s>128&&(s=128);var n=document.getElementById(t),o=[];void 0===n&&alert("Element "+t+" not found!"),n.style.display="block",n.style.width=a+"px",n.style.height=e+"px",n.style.position="relative";var c=[],p=[],u=a/s|0,d=this;return this.setVolume=function(t){if(0===arguments.length)return r;t<0&&(t=0),t>1&&(t=1),r=t},this.setVolume(r),this.createSnapshot=function(){var t,a;l(c);for(var r=0;r<s;r++)t=i(r),(a=o[r].style).top=(e-e*t|0)+"px",a.height=(e*t|0)+"px"},l(p),function(){var a,r="";for(a=0;a<s;a++)r+='<div id="'+t+"_band"+a+'" ',r+='style="display:block;position:absolute;',r+="left:"+(a*u+1|0),r+="px;top:"+e,r+="px;width:"+(u-2),r+="px;height:0",r+='px;" class="band"></div>';for(n.innerHTML=r,a=0;a<s;a++){var i=document.getElementById(t+"_band"+a);o.push(i)}}(),setInterval(d.createSnapshot,100),this}var raa1Url="http://raa.media:8000/raa1.ogg",raa1StatusUrl="http://www.raa.media:8000/status-json.xsl",PlaybackManager=function(t,a){this.radioHasProgram=!1,this.cyclesInSameStatus=0,this.currentProgram="",this.isPausedByUser=!1,this.loop=function(t,a){a=void 0===a||a,t.readServerStatus(a)},this.readServerStatus=function(t){self=this,$.get(raa1StatusUrl,function(a){title=a.icestats.source.title,title&&""!=title&&"BLANK"!=title?self.radioHasProgram?self.cyclesInSameStatus++:(self.radioHasProgram=!0,self.cyclesInSameStatus=1):self.radioHasProgram?(self.radioHasProgram=!1,self.cyclesInSameStatus=1):self.cyclesInSameStatus++,self.decideRadioStatus(t)})},this.decideRadioStatus=function(e){this.radioHasProgram?t():(!this.radioHasProgram&&this.cyclesInSameStatus>2||!e)&&a()}};PlaybackManager.prototype.init=function(){self=this,this.loop(this,!1),setInterval(function(){self.loop(self)},1e4)};var generatePlayerButton=function(){return $("#player")[0].paused?'<img src="img/play-button.png" style="max-height: 50px">':'<img src="img/pause-button.png" style="max-height: 50px">'},flipPlaybackStatus=function(){$("#player")[0].paused?($("#player")[0].play(),playbackManager.isPausedByUser=!1):($("#player")[0].pause(),playbackManager.isPausedByUser=!0),$("#player-button").html(generatePlayerButton())},playbackManager=new PlaybackManager(function(){$("#player")[0].paused&&(playbackManager.isPausedByUser||($("#player")[0].src=raa1Url,$("#player")[0].play()),$("#player-bar").html('<div class="col-xs-11 h5"><div class="row" style="padding-right:20px"><div id="equalizer" class="col-xs-4"/><div class="col-xs-8" style="padding-top: 10px"> در حال پخش: '+title+'</div></div></div><div id="player-button" class="col-xs-1" dir="ltr" style="padding:0px">   <script type="text/javascript">     $("#player-button").html(generatePlayerButton());     $("#player-button").on("click", function() {       flipPlaybackStatus();     });   <\/script></div>'),makeSpectrum("equalizer",20,20,3,0))},function(){$("#player-bar").html('<div class="text-center h4" style="padding-top: 10px">الان برنامه نداریم!</div>'),$("#player")[0].src=""});playbackManager.init();
//# sourceMappingURL=raa.min.js.map